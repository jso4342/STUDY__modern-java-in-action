# Chapter 3 - λλ‹¤ ν‘ν„μ‹

### 3.1 λλ‹¤λ€ λ¬΄μ—‡μΈκ°€?
λλ‹¤ ν‘ν„μ‹μ€ λ©”μ„λ“λ΅ μ „λ‹¬ν•  μ μλ” μµλ… ν•¨μλ¥Ό λ‹¨μν™”ν• κ²ƒμ΄λ‹¤. μ¦‰, ν•¨μ(λ©”μ„λ“)λ¥Ό κ°„λ‹¨ν• μ‹(expression)μΌλ΅ ν‘ν„ν•λ” λ°©λ²•μ΄λ‹¤. 

#### λλ‹¤μ νΉμ§•
* **μµλ…** : λ³΄ν†µμ λ©”μ„λ“μ™€ λ‹¬λ¦¬ μ΄λ¦„μ΄ μ—†λ” ν•¨μμ΄λ―€λ΅ **μµλ…**μ΄λΌ ν‘ν„ 
    * `int max(int a, int b){return a > b ? a : b;}` π‘‰
    * `(a, b) -> a > b ? a : b`  μ²λΌ μ΄λ¦„μ΄ μ—†λ‹¤.
* **ν•¨μ** : νΉμ • ν΄λμ¤μ— μΆ…μ†λμ§€ μ•μΌλ―€λ΅ ν•¨μλΌκ³  λ¶€λ¥Έλ‹¤. ν•μ§€λ§ λ©”μ„λ“μ²λΌ νλΌλ―Έν„° λ¦¬μ¤νΈ, λ°”λ””, λ³€ν™ λ°©μ‹, κ°€λ¥ν• μμ™Έ λ¦¬μ¤νΈλ¥Ό ν¬ν•¨
* **μ „λ‹¬** : λλ‹¤ ν‘ν„μ‹μ„ λ©”μ„λ“ μΈμλ΅ μ „λ‹¬ν•κ±°λ‚ λ³€μλ΅ μ €μ¥ κ°€λ¥
* **κ°„κ²°μ„±** : μµλ… ν΄λμ¤μ²λΌ λ§μ€ μ½”λ“λ¥Ό κµ¬ν„ν•  ν•„μ”κ°€ μ—†μ

κ·Έλ ‡λ‹¤λ©΄ λλ‹¤κ°€ μ½”λ“λ¥Ό μ–Όλ§λ‚ κ°„κ²°ν•κ² λ°”κΏ€ μ μλ”μ§€, μ•„λ μμ λ¥Ό ν†µν•΄ ν™•μΈν•΄λ³΄μ. 

**κΈ°μ΅΄ μ½”λ“**
```
Comparator<Apple> byWeight = new Comparator<Apple>(){
    public int compare(Apple a1, Apple a2){
        return a1.getWeight().compareTo(a2.getWeight));
    }
}
```
**λλ‹¤ μ‚¬μ©** 
```
Comparator<Apple> byWeight = 
    // λλ‹¤ νλΌλ―Έν„°     |ν™”μ‚΄ν‘|             λλ‹¤ λ°”λ””               
    (Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeught());
```
* μ¦‰, λ©”μ„λ“μ μ΄λ¦„κ³Ό λ°ν™νƒ€μ…μ„ μ κ±°ν•κ³ , -> λ¥Ό λΈ”λ΅{} μ•μ— μ¶”κ°€ν•λ‹¤. 
* λν• λ°ν™ κ°’μ΄ μλ” κ²½μ°, μ‹μ΄λ‚ κ°’λ§ μ κ³  return λ¬Έμ€ μƒλµ κ°€λ¥ 
* λ§¤κ°λ³€μκ°€ ν•λ‚μΈ κ²½μ°, κ΄„νΈ() μƒλµ κ°€λ¥ 
    * `(a) -> a * a` π‘‰ `a -> a * a`
* λΈ”λ΅ μ•μ λ¬Έμ¥μ΄ ν•λ‚μΌ λ•, κ΄„νΈ {} μƒλµ κ°€λ¥ (λμ— ; μ•λ¶™μ„)
* λ§¤κ°λ³€μμ νƒ€μ…μ΄ μ¶”λ΅  κ°€λ¥ν•  λ•, νƒ€μ… μƒλµ κ°€λ¥ (λ€λ¶€λ¶„μ κ²½μ° μƒλµ κ°€λ¥ν•λ‹¤)

 <hr>
   
* **νλΌλ―Έν„° λ¦¬μ¤νΈ** : λλ‹¤ λ°”λ””μ—μ„ μ‚¬μ©ν•  λ©”μ„λ“ νλΌλ―Έν„° λ…μ‹ 
* **ν™”μ‚΄ν‘** : λλ‹¤μ νλΌλ―Έν„° λ¦¬μ¤νΈμ™€ λ°”λ””λ¥Ό κµ¬λ¶„
* **λλ‹¤ λ°”λ””** : λλ‹¤μ λ°ν™κ°’μ— ν•΄λ‹Ήν•λ” ν‘ν„μ‹ 
* (parameters) -> expression         
  *  () -> "Kiyoung"
* (parameters) -> { statements; }
  * (String s) -> {return "Kiyoung";}


### 3.2 μ–΄λ””μ—, μ–΄λ–»κ² λλ‹¤λ¥Ό μ‚¬μ©ν•λ”κ°€?
#### ν•¨μν• μΈν„°νμ΄μ¤
ν•¨μν• μΈν„°νμ΄μ¤λ” **μ¤μ§ ν•λ‚μ μ¶”μƒ λ©”μ„λ“λ§ μ„ μ–Έλ μΈν„°νμ΄μ¤**μ΄λ‹¤. μ•„λ¬΄λ¦¬ λ§μ€ λ””ν΄νΈ λ©”μ„λ“κ°€ μ΅΄μ¬ν•λ”λΌλ„ μ¶”μƒ λ©”μ„λ“κ°€ μ¤μ§ ν•λ‚μ΄λ©΄ ν•¨μν• μΈν„°νμ΄μ¤μ΄λ‹¤. λλ‹¤ ν‘ν„μ‹μΌλ΅ ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ κµ¬ν„μ„ μ§μ ‘ μ „λ‹¬ν•  μ μμΌλ―€λ΅ **μ „μ²΄ ν‘ν„μ‹μ„ ν•¨μν• μΈν„°νμ΄μ¤μ μΈμ¤ν„΄μ¤λ΅ μ·¨κΈ‰**ν•  μ μλ‹¤.  
π‘‰ ν•¨μν• μΈν„°νμ΄μ¤ νƒ€μ…μ μ°Έμ΅°λ³€μλ΅ λλ‹¤μ‹μ„ μ°Έμ΅°ν•  μ μμ (λ‹¨, ν•¨μν• μΈν„°νμ΄μ¤μ λ©”μ„λ“μ™€ λλ‹¤μ‹μ λ§¤κ°λ³€μ κ°μμ™€ λ°ν™νƒ€μ…μ΄ μΌμΉν•΄μ•Όν•¨)


> ν•¨μν• μΈν„°νμ΄μ¤μ—λ” @FuntionalInterface λ…Έν…μ΄μ…μ„ λ¶™μ—¬μ£Όμ. @FuntionalInterfaceλ” ν•¨μν• μΈν„°νμ΄μ¤μ„μ„ κ°€λ¦¬ν‚¤λ” μ–΄λ…Έν…μ΄μ…μ΄λ‹¤. λ§μ•½ μ–΄λ…Έν…μ΄μ…μ„ μ„ μ–Έν–μ§€λ§ μ‹¤μ λ΅ ν•¨μν• μΈν„°νμ΄μ¤κ°€ μ•„λ‹λ©΄ μ»΄νμΌλ¬κ°€ μ—λ¬λ¥Ό λ°μƒμ‹ν‚¨λ‹¤.

#### ν•¨μ λ””μ¤ν¬λ¦½ν„° 
ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“λ” λλ‹¤ ν‘ν„μ‹μ μ‹κ·Έλ‹μ²λ¥Ό λ¬μ‚¬ν•λ‹¤. ν•¨μν• μΈν„°νμ΄μ¤μ μ¶”μƒ λ©”μ„λ“ μ‹κ·Έλ‹μ²λ¥Ό **ν•¨μ λ””μ¤ν¬λ¦½ν„°**λΌκ³  λ¶€λ¥Έλ‹¤.

### 3.3 μ‹¤ν–‰ μ–΄λΌμ΄λ“ ν¨ν„΄
μ½”λ“λ¥Ό **μ„¤μ •**κ³Ό **κ³Όμ •**μ„ λ‘ κ³Όμ •μ΄ λ‘λ¬μ‹Έλ” ν•νƒμ ν¨ν„΄μ„ μ‹¤ν–‰ μ–΄λΌμ΄λ“ ν¨ν„΄(execute around pattern)μ΄λΌκ³  λ¶€λ¥Έλ‹¤. μ΄λ• μ‹¤μ  μμ›μ„ μ²λ¦¬ν•λ” μ½”λ“μ λ™μ‘μ„ νλΌλ―Έν„°ν™” ν•κ³  λλ‹¤λ¥Ό ν†µν•΄ λ™μ‘μ„ μ „λ‹¬ν•  μ μλ‹¤.

### 3.4 ν•¨μν• μΈν„°νμ΄μ¤ μ‚¬μ©
ν•¨μν• μΈν„°νμ΄μ¤μΈ Predicate, Consumer, Function μΈν„°νμ΄μ¤λ¥Ό μ•μ•„λ³΄μ.

#### Predicate

(T) β†’ boolean

```java
@FuncationalInterface
public interface Predicate<T> {
	boolean test(T t);
}
```

#### Consumer

(T) β†’ void

```java
@FuncationalInterface
public interface Consumer<T> {
	void accept(T t);
}
```

#### Function

(T) β†’ R

```java
@FuncionalInterface
public interface Function<T, R> {
	R apply(T t);
}
```

#### ν•¨μν• μΈν„°νμ΄μ¤μ™€ μμ™Έ

java.util.functionμ ν•¨μν• μΈν„°νμ΄μ¤λ” ν™•μΈλ μμ™Έλ¥Ό λμ§€λ” λ™μ‘μ„ ν—μ©ν•μ§€ μ•λ”λ‹¤. μ¦‰, **μμ™Έλ¥Ό λμ§€λ” λλ‹¤ ν‘ν„μ‹μ„ λ§λ“λ ¤λ©΄ ν™•μΈλ μμ™Έλ¥Ό μ„ μ–Έν•λ” ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό μ§μ ‘ μ •μ**ν•κ±°λ‚ **λλ‹¤λ¥Ό try/catch λΈ”λ΅μΌλ΅ κ°μ‹Έ**μ•Ό ν•λ‹¤.

### 3.5 ν•μ‹ κ²€μ‚¬, ν•μ‹ μ¶”λ΅ , μ μ•½

λλ‹¤ ν‘ν„μ‹μ΄ μ–΄λ–»κ² λ™μ‘ν•κ² λλ”μ§€ μ‹¤μ  ν•μ‹μ„ νμ•…ν•μ.

#### ν•μ‹ κ²€μ‚¬

λλ‹¤κ°€ μ‚¬μ©λλ” μ½ν…μ¤νΈ(context)λ¥Ό μ΄μ©ν•΄μ„ λλ‹¤μ ν•μ‹(type)μ„ μ¶”λ΅ ν•  μ μλ‹¤. μ–΄λ–¤ μ½ν…μ¤νΈμ—μ„ κΈ°λ€λλ” λλ‹¤ ν‘ν„μ‹μ ν•μ‹μ„ **λ€μƒ ν•μ‹(target type)** μ΄λΌκ³  λ¶€λ¥Έλ‹¤. ν•μ‹κ²€μ‚¬λ” λ‹¤μκ³Ό κ°™μ€ κ³Όμ •μΌλ΅ μ§„ν–‰λλ‹¤.

1. λλ‹¤κ°€ μ‚¬μ©λ λ©”μ„λ“μ μ„ μ–Έμ„ ν™•μΈν•λ‹¤.
2. λλ‹¤κ°€ μ‚¬μ©λ λ©”μ„λ“μ νλΌλ―Έν„°λ΅ λ€μƒ ν•μ‹μ„ κΈ°λ€ν•λ‹¤.
3. κΈ°λ€ν•λ” νλΌλ―Έν„°μ ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό νμ•…ν•λ‹¤.
4. κ·Έ ν•¨μν• μΈν„°νμ΄μ¤μ ν•¨μ λ””μ¤ν¬λ¦½ν„°λ¥Ό λ¬μ‚¬ν•λ‹¤.
5. μ „λ‹¬λ°›μ€ μΈμμ λλ‹¤κ°€ κ·Έ μ”κµ¬μ‚¬ν•­μ„ λ§μ΅±ν•΄μ•Ό ν•λ‹¤.

#### ν•μ‹ μ¶”λ΅ 

μ λ„¤λ¦­μ„ μ‚¬μ©ν•  λ• μ„ μ–Έλ¶€μ— νƒ€μ… λ§¤κ°λ³€μλ¥Ό λ…μ‹ν•λ©΄ μƒμ„±μμ—μ„λ” λΉ λ‹¤μ΄μ•„λ¬λ“ μ—°μ‚°μλ΅ λ‚¨κ²¨λ‘μ–΄λ„ μλ°” μ»΄νμΌλ¬λ” μƒμ„± κ°μ²΄μ νƒ€μ…μ„ μ¶”λ΅ ν•  μ μλ‹¤. λλ‹¤ ν‘ν„μ‹λ„ λ§μ°¬κ°€μ§€μ΄λ‹¤. μλ°” μ»΄νμΌλ¬λ” λλ‹¤ ν‘ν„μ‹μ΄ μ‚¬μ©λ μ½ν…μ¤νΈλ¥Ό μ΄μ©ν•΄μ„ λλ‹¤ ν‘ν„μ‹κ³Ό κ΄€λ ¨λ ν•¨μν• μΈν„°νμ΄μ¤λ¥Ό μ¶”λ΅ ν•λ‹¤.

```java
// ν•μ‹ μ¶”λ΅ μ„ ν•μ§€ μ•μ
Comparator<Apple> c =
	(Apple a1, Apple a2) -> a1.getWeight().compareTo(a2.getWeight());

// ν•μ‹μ„ μ¶”λ΅ ν•¨
Comparator<Apple> c = 
	(a1, a2) -> a1.getWeight().compareTo(a2.getWeight());
```
μ„μ—μ„ μ–ΈκΈ‰ν• κ²ƒ μ²λΌ, λ§¤κ°λ³€μμ νƒ€μ…μ΄ μ¶”λ΅  κ°€λ¥ν•  λ•, νƒ€μ… μƒλµ κ°€λ¥ (λ€λ¶€λ¶„μ κ²½μ° μƒλµ κ°€λ¥ν•λ‹¤)

#### μ§€μ—­ λ³€μ μ‚¬μ©(μ μ•½)

λλ‹¤ ν‘ν„μ‹μ—μ„λ” μµλ… ν•¨μκ°€ ν•λ” κ²ƒ μ²λΌ μμ  λ³€μ(νλΌλ―Έν„°λ΅ λ„κ²¨μ§„ λ³€μκ°€ μ•„λ‹ μ™Έλ¶€μ—μ„ μ •μλ λ³€μ)λ¥Ό ν™μ©ν•  μ μλ‹¤. μ΄λ¥Ό λλ‹¤ μΊ΅μ²λ§(lamda capturing)μ΄λΌ λ¶€λ¥Έλ‹¤. ν•μ§€λ§ κ·Έλ¬λ ¤λ©΄ μ§€μ—­ λ³€μλ” λ…μ‹μ μΌλ΅ finalλ΅ μ„ μ–Έλμ–΄ μμ–΄μ•Ό ν•κ±°λ‚ μ‹¤μ§μ μΌλ΅ finalλ΅ μ„ μ–Έλ λ³€μμ™€ λ‘κ°™μ΄ μ‚¬μ©λμ–΄μ•Ό ν•λ‹¤(μ΄ν›„ μ¬ ν• λ‹Ή λ¶κ°€).

μΈμ¤ν„΄μ¤ λ³€μλ” ν™μ— μ €μ¥λλ” λ°λ©΄ μ§€μ—­ λ³€μλ” μ¤νƒμ— μ„μΉν•λ‹¤. λλ‹¤μ—μ„ μ§€μ—­ λ³€μμ— λ°”λ΅ μ ‘κ·Όν•  μ μλ‹¤λ” κ°€μ •ν•μ— λλ‹¤κ°€ μ¤λ λ“μ—μ„ μ‹¤ν–‰λλ‹¤λ©΄ μ§€μ—­ λ³€μλ¥Ό ν• λ‹Ήν• μ¤λ λ“κ°€ μ‚¬λΌμ Έμ„ λ³€μ ν• λ‹Ήμ΄ ν•΄μ λμ—λ”λ°λ„ λλ‹¤λ¥Ό μ‹¤ν–‰ν•λ” μ¤λ λ“μ—μ„λ” ν•΄λ‹Ή λ³€μμ— μ ‘κ·Όν•λ ¤ ν•  μ μλ‹¤. λ”°λΌμ„ μλ°” κµ¬ν„μ—μ„λ” μ›λ λ³€μμ— μ ‘κ·Όμ„ ν—μ©ν•λ” κ²ƒμ΄ μ•„λ‹λΌ μμ  μ§€μ—­ λ³€μμ λ³µμ‚¬λ³Έμ„ μ κ³µν•λ‹¤. λ”°λΌμ„ λ³µμ‚¬λ³Έμ κ°’μ΄ λ°”λ€μ§€ μ•μ•„μ•Ό ν•λ―€λ΅ μ§€μ—­ λ³€μμ—λ” ν• λ²λ§ κ°’μ„ ν• λ‹Ήν•΄μ•Ό ν•λ‹¤λ” μ μ•½μ΄ μƒκΈ΄κ²ƒμ΄λ‹¤.

### 3.6 λ©”μ„λ“ μ°Έμ΅°

λ…μ‹μ μΌλ΅ λ©”μ„λ“ λ…μ„ μ°Έμ΅°ν•¨μΌλ΅μ¨ **κ°€λ…μ„±μ„ λ†’μΌ μ μλ‹¤**. λ©”μ„λ“ μ°Έμ΅°λ” λ©”μ„λ“λ… μ•μ— κµ¬λ¶„μ(**::**)λ¥Ό λ¶™μ΄λ” λ°©μ‹μΌλ΅ μ‚¬μ©ν•  μ μλ‹¤. Class::method ν•μ‹μ„ μ·¨ν•λ‹¤. λ©”μ„λ“ μ°Έμ΅°λ” μ„Έ κ°€μ§€ μ ν•μΌλ΅ κµ¬λ¶„ν•  μ μλ‹¤.

1. μ •μ  λ©”μ„λ“ μ°Έμ΅° - Integer::parseInt
2. λ‹¤μ–‘ν• ν•μ‹μ μΈμ¤ν„΄μ¤ λ©”μ„λ“ μ°Έμ΅° - String::length
3. κΈ°μ΅΄ κ°μ²΄μ μΈμ¤ν„΄μ¤ λ©”μ„λ“ μ°Έμ΅° - Apple::getWeight
    * Transaction κ°μ²΄λ¥Ό ν• λ‹Ήλ°›μ€ Apple μ§€μ—­ λ³€μκ°€ μκ³ , Transaction κ°μ²΄μ—λ” getWeight λ©”μ„λ“κ°€ μλ‹¤λ©΄ μ„ μ²λΌ ν‘ν„ κ°€λ¥ 

#### μƒμ„±μ μ°Έμ΅°
ClassName::new μ²λΌ ν΄λμ¤λ…κ³Ό new ν‚¤μ›λ“λ¥Ό μ΄μ©ν•΄μ„ κΈ°μ΅΄ μƒμ„±μμ μ°Έμ΅°λ¥Ό λ§λ“¤ μ μλ‹¤. μ΄λ” μ •μ  λ©”μ„λ“μ μ°Έμ΅°λ¥Ό λ§λ“λ” λ°©μ‹κ³Ό λΉ„μ·ν•λ‹¤.

### λλ‹¤ ν‘ν„μ‹μ„ μ΅°ν•©ν•  μ μλ” μ μ©ν• λ©”μ„λ“

ν•¨μν• μΈν„°νμ΄μ¤μ—μ„λ” λ‹¤μ–‘ν• μ ν‹Έλ¦¬ν‹° λ©”μ„λ“λ¥Ό μ§€μ›ν•λ‹¤. Comparator, Function, Predicate κ°™μ€ ν•¨μν• μΈν„°νμ΄μ¤λ” λλ‹¤ ν‘ν„μ‹μ„ μ΅°ν•©ν•  μ μλ„λ΅ μ ν‹Έλ¦¬ν‹° λ©”μ„λ“λ¥Ό μ κ³µν•λ©°, κ°„λ‹¨ν• μ—¬λ¬ κ°μ λλ‹¤ ν‘ν„μ‹μ„ μ΅°ν•©ν•΄μ„ λ³µμ΅ν• λλ‹¤ ν‘ν„μ‹μ„ λ§λ“¤μ μλ‹¤. μ΄ μ ν‹Έλ¦¬ν‹° λ©”μ„λ“λ” **λ””ν΄νΈ λ©”μ„λ“**λ΅ μ κ³µλμ–΄ ν•¨μν• μΈν„°νμ΄μ¤μ μ •μλ¥Ό ν•΄μΉμ§€ μ•μΌλ©° μ—¬λ¬ μ΅°ν•©μ„ κ°€λ¥μΌ€ ν•λ” μ ν‹Έλ¦¬ν‹°λ¥Ό μ κ³µν•λ‹¤.

#### Comparator μ—°κ²° 

- comparing - λΉ„κµμ— μ‚¬μ©ν•  ν‚¤λ¥Ό μ¶”μ¶ν•λ” Function κΈ°λ°μ Comparatorλ¥Ό λ°ν™ 
- reversed() - μ—­μ •λ ¬
- thenComparing - λ™μΌν• μ΅°κ±΄μ— λ€ν•μ—¬ μ¶”κ°€μ μΈ λΉ„κµν™, μ¦‰ λ‘ λ²μ§Έ λΉ„κµμ μƒμ„± 
```java
inventory.sort(comparing(Apple::getWeight)
         .reserved()                            // λ¬΄κ²λ¥Ό λ‚΄λ¦Όμ°¨μμΌλ΅ μ •λ ¬    
         .thenComparing(Apple::getCountry));    // λ¬΄κ²κ°€ κ°™λ‹¤λ©΄ κµ­κ°€λ³„λ΅ μ •λ ¬ 
```

#### Predicate μ΅°ν•© 

- and - and μ—°μ‚°
- or - or μ—°μ‚°
- negate - not μ—°μ‚°
```java
// λΉ¨κ°„μƒ‰μ΄λ©΄μ„ λ¬΄κ±°μ΄(150g μ΄μƒ) μ‚¬κ³Ό λλ” λ…Ήμƒ‰ μ‚¬κ³Ό 
Predicate<Apple> redAndHeavyAppleOrGreen = 
    readApple.and(apple -> apple.getWeight() > 150)
             .or(apple -> GREEN.equals(a.getColor())); // Predicate λ©”μ„λ“λ¥Ό μ—°κ²°ν•΄μ„ λ” λ³µμ΅ν• Predicate κ°μ²΄ μƒμ„± 
```

#### Function μ΅°ν•© 

- andThen - μ΄ν›„μ— μ²λ¦¬ν•  function μ¶”κ°€
- compose - μ΄μ „μ— μ²λ¦¬λμ–΄μ•Όν•  function μ¶”κ°€
```java
Function<Integer, Integer> f = x -> x + 1;
Function<Integer, Integer> g = x -> x * 2;
Function<Integer, Integer> h1 = f.andThen(g);
Function<Integer, Integer> h2 = f.compose(g);
int result1 = h1.apply(1); // 4
int result2 = h2.apply(1); // 3
```